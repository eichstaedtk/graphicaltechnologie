<html>

<head>
  <title>WEB GL on Canvas</title>
  <link rel="stylesheet" href="stylesheets/style.css">
  <meta charset="utf-8">
  <link rel="stylesheet" href="stylesheets/materialize.min.css" />

  <script src="javascripts/jquery-3.6.0.min.js"></script>
  <script src="javascripts/materialize.min.js"></script>
  <script src="javascripts/gl-matrix.js"></script>

  <script src="javascripts/Kugel.js"></script>
  <script src="javascripts/plane-ccc.js"></script>
  <script src="javascripts/sphere-ccc.js"></script>
  <script defer src="javascripts/ccc-app.js"></script>

  <script type="application/javascript">

    function loadWegGL(shadderURL,fragmentURL) {
      console.log('Loading WebGL Scripts '+shadderURL+ ' '+fragmentURL)

      var shadderScript = document.getElementById('vertexshader')
      var fragmentScript = document.getElementById('fragmentshader')

      var vs_source = null,
          fs_source = null;
      $.get({
        async: false,
        url: shadderURL ,
        success: function (data) {
          vs_source = data
          console.log(vs_source)
          if(!shadderScript) {
            shadderScript = document.createElement('script');
            shadderScript.setAttribute('type', 'x-shader/x-vertex')
            shadderScript.setAttribute('id', 'vertexshader')
            document.head.appendChild(shadderScript);
          }

          shadderScript.text = vs_source
        },
        dataType: 'text'
      });

      $.get({
        async: false,
        url: fragmentURL,
        success: function (data) {
          fs_source = data

          if(!fragmentScript) {
            fragmentScript = document.createElement('script');
            fragmentScript.setAttribute('type', 'x-shader/x-fragment')
            fragmentScript.setAttribute('id', 'fragmentshader')
            document.head.appendChild(fragmentScript);
          }

          fragmentScript.text = fs_source
        },
        dataType: 'text'
      });
    }

    function start() {

      var rangeSlider = function(){
        var slider = $('.range-slider'),
            range = $('.range-slider__range'),
            value = $('.range-slider__value');

        slider.each(function(){

          value.each(function(){
            var value = $(this).prev().attr('value');
            $(this).html(value);
          });

          range.on('input', function(){
            $(this).next(value).html(this.value);
          });
        });
      };

      rangeSlider();

        loadWegGL('./webgl/vertex-ccc.vs','./webgl/fragment-ccc.fs')
        app.start()
    }

  </script>
</head>

<body onload="start()">
<section>
  <h2>EA CCC-Christmas & Corona Challenge - Eine Simulation Konrad Eichstädt THB</h2>
  <div style="height: 250px;">
  <section style="width: 50%; float: left">
    Steuerung Tastatur
    <p><b>O:</b> Ortogonale Ansicht</p>
    <p><b>F:</b> Frustum Ansicht</p>
    <p><b>P:</b> Perspektiv Ansicht</p>
    <p><b>E:</b> Bewegung weg</p>
    <p><b>Q:</b> Bewegung hin</p>
  </section>
  <section style="width: 50%;float: right">
    <p>Kamera</p>
    <p><b>W:</b> Bewegung nach Oben</p>
    <p><b>S:</b> Bewegung nach Unten</p>
    <p><b>A:</b> Bewegung nach Links</p>
    <p><b>D:</b> Bewegung nach Rechts</p>
  </section>
  <section id="config" style="width: 50%;float: right">
      <h3><strong>Konfiguration</strong></h3>
      <a id="startSimulation" class="btn">Start</a>

      <div style="margin-top: 10px">
        <label id="checkboxParent">
          <input id="immunitaet" type="checkbox" />
          <span id="checkboxText">Mit / Ohne Immunität</span>
        </label>
      </div>

       <div class="range-slider">
          <p>Anzahl gesunde Kugeln: </p>
          <input style="width: 50%;" type="range" min="1" max="20" value="10" id="anzahlGesundeKugeln" class="range-slider__range">
          <span class="range-slider__value">0</span>
       </div>
      <div class="range-slider">
        <p>Anzahl kranke Kugeln: </p>
        <input style="width: 50%;" type="range" min="1" max="20" value="10" id="anzahlKrankeKugeln" class="range-slider__range">
        <span class="range-slider__value">0</span>
      </div>
      <div class="range-slider">
        <p>Radius Kugeln:</p>
        <input style="width: 50%;" type="range" min="1" max="10" value="7" id="kugelRadius" class="range-slider__range">
        <span class="range-slider__value">0</span>
      </div>
      <div class="range-slider">
        <p>Gesundung:</p>
        <input style="width: 50%;" type="range" min="1" max="500" value="500" id="gesundung" class="range-slider__range">
        <span class="range-slider__value">0</span>
      </div>
    <div class="range-slider">
        <p>Geschwindigkeit:</p>
      <input style="width: 50%;" type="range" min="1" max="100" value="25" id="geschwindigkeit" class="range-slider__range">
    <span class="range-slider__value">0</span>
    </div>
    </section>
    <section style="width: 50%;float: right">
      <h3><strong>Statistik</strong></h3>
      <svg xmlns="http://www.w3.org/2000/svg" width="400" height="200">
        <text id="statGesamtText" x="10" y="50" font-size="12"></text>
        <rect id="statGesamt" x="100" y="35" width="0" height="20" rx="3" ry="3" fill="rgb(0, 0, 0)" />
        <text id="statGesundText" x="10" y="80" font-size="12"></text>
        <rect id="statGesund" x="100" y="65" width="0" height="20" rx="3" ry="3" fill="rgb(78, 187, 87)" />
        <text id="statKrankText" x="10" y="110" font-size="12"></text>
        <rect id="statKrank" x="100" y="95" width="0" height="20" rx="3" ry="3" fill="rgb(255, 12, 12)" />
        <text id="statImunText" x="10" y="140" font-size="12"></text>
        <rect id="statImun" x="100" y="125" width="0" height="20" rx="3" ry="3" fill="rgb(51, 178, 229)" />
      </svg>
    </section>
  </div>
  <div>
  <canvas id="c" width="800" height="800"></canvas>
  </div>
</section>
</body>
</html>
